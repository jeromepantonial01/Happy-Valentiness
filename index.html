<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dreamscape Tulips</title>
    <style>
        :root {
            --bg: #020205;
            --pink: #d4a3f4;
            --green: #0a5d2a;
            --glow: rgba(212, 163, 244, 0.5);
        }

        body {
            margin: 0;
            background-color: var(--bg);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            overflow: hidden;
            font-family: sans-serif;
        }

        /* The glowing atmosphere */
        .stars {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, #020205 0%, #1a1a2e 40%, #4a1c40 60%, #ff7e5f 80%, #feb47b 100%);
            background-size: 100% 300%;
            animation: sunrise 12s ease-in-out infinite alternate;
            z-index: 0;
        }

        @keyframes sunrise {
            0% { background-position: 50% 100%; }
            100% { background-position: 50% 20%; }
        }

        .container {
            position: relative;
            width: 600px;
            height: 85vh;
            z-index: 2;
        }

        /* Floating Heart Circles */
        .heart-circle {
            position: absolute;
            border: 1px solid rgba(212, 163, 244, 0.4);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.2), inset 0 0 10px rgba(255, 255, 255, 0.1);
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.1), transparent 60%);
            opacity: 0;
            pointer-events: none;
        }

        .heart-circle::after {
            content: '‚ù§';
            color: var(--pink);
            font-size: 14px;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--pink);
            border-radius: 50%;
            pointer-events: none;
        }

        svg {
            width: 100%;
            height: 100%;
            /* Soft outer glow for the vector art */
            filter: drop-shadow(0 0 8px rgba(212, 163, 244, 0.4));
        }

        .sway {
            animation: sway 6s ease-in-out infinite;
        }

        @keyframes sway {
            0%, 100% { transform: rotate(-2deg); }
            50% { transform: rotate(2deg); }
        }

        .message {
            position: absolute;
            top: 15%;
            width: 100%;
            text-align: center;
            font-family: 'Brush Script MT', cursive;
            font-size: 4rem;
            color: #fff;
            text-shadow: 0 0 10px var(--pink), 0 0 20px var(--glow);
            opacity: 0;
            animation: fadeIn 3s ease-out forwards;
            animation-delay: 1s;
            z-index: 10;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        @keyframes growStem {
            from { transform: scaleY(0); }
            to { transform: scaleY(1); }
        }

        @keyframes bloom {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .interactive-flower {
            cursor: pointer;
            transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: 0 20px;
        }
        .interactive-flower.closed {
            transform: scale(0.2, 1.1);
        }

        .grass {
            transform-origin: 0 0;
            animation: grassSway 4s ease-in-out infinite;
        }

        @keyframes grassSway {
            0%, 100% { transform: rotate(-6deg); }
            50% { transform: rotate(6deg); }
        }
    </style>
</head>
<body>
    <div class="stars"></div>
    <div class="container" id="scene">
        <div class="message">Happy Valentines</div>
        <svg viewBox="0 0 400 500" preserveAspectRatio="xMidYMax meet">
            <defs>
                <!-- Glowing Core Gradient -->
                <radialGradient id="flowerGlow" cx="50%" cy="50%" r="50%">
                    <stop offset="0%" stop-color="#fffde7" />
                    <stop offset="40%" stop-color="#e1bee7" />
                    <stop offset="100%" stop-color="#ce93d8" />
                </radialGradient>
                
                <!-- Leaf Gradient: Soft green to black -->
                <linearGradient id="leafGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#1e8449" />
                    <stop offset="100%" stop-color="#051a0d" />
                </linearGradient>

                <!-- Grass Gradient -->
                <linearGradient id="grassGrad" x1="0%" y1="100%" x2="0%" y2="0%">
                    <stop offset="0%" stop-color="#000000" />
                    <stop offset="100%" stop-color="#2e7d32" />
                </linearGradient>

                <!-- Petal Gradients for Realism -->
                <linearGradient id="petalGradBack" x1="0%" y1="100%" x2="0%" y2="0%">
                    <stop offset="0%" stop-color="#4a0072" />
                    <stop offset="100%" stop-color="#8e24aa" />
                </linearGradient>
                <linearGradient id="petalGradSide" x1="0%" y1="100%" x2="0%" y2="0%">
                    <stop offset="0%" stop-color="#6a1b9a" />
                    <stop offset="100%" stop-color="#ab47bc" />
                </linearGradient>
                <linearGradient id="petalGradCenter" x1="0%" y1="100%" x2="0%" y2="0%">
                    <stop offset="0%" stop-color="#8e24aa" />
                    <stop offset="100%" stop-color="#ce93d8" />
                </linearGradient>

                <!-- Reusable Leaf Pair for Pinnate Structure -->
                <g id="leaf-pair">
                    <!-- Natural Leaf Shape using Path -->
                    <path d="M0,0 Q-25,-10 -60,0 Q-25,10 0,0" fill="url(#leafGrad)" transform="rotate(-10)" />
                    <path d="M0,0 Q25,-10 60,0 Q25,10 0,0" fill="url(#leafGrad)" transform="rotate(10)" />
                </g>

                <!-- Reusable Tulip Head (5 Petals) -->
                <g id="tulip-head">
                    <!-- Back Petals -->
                    <ellipse cx="-15" cy="-5" rx="18" ry="30" fill="url(#petalGradBack)" transform="rotate(-25)" />
                    <ellipse cx="15" cy="-5" rx="18" ry="30" fill="url(#petalGradBack)" transform="rotate(25)" />
                    <!-- Side Petals -->
                    <ellipse cx="-10" cy="5" rx="20" ry="32" fill="url(#petalGradSide)" transform="rotate(-10)" />
                    <ellipse cx="10" cy="5" rx="20" ry="32" fill="url(#petalGradSide)" transform="rotate(10)" />
                    <!-- Center Petal -->
                    <ellipse cx="0" cy="8" rx="22" ry="35" fill="url(#petalGradCenter)" />
                    <!-- Glowing Core -->
                    <circle cx="0" cy="20" r="12" fill="url(#flowerGlow)" opacity="0.9" />
                </g>
            </defs>

            <!-- Far Left Tulip (Background) -->
            <g transform="translate(50, 250) scale(0.7) rotate(-15)" opacity="0.9">
                <g class="sway" style="transform-origin: 0 300px; animation-delay: -1.5s">
                    <g style="transform-origin: 0 300px; animation: growStem 3s ease-out forwards;">
                        <path d="M0,300 Q-5,150 0,0" stroke="#0a5d2a" stroke-width="4" fill="none" />
                        <use href="#leaf-pair" y="250" transform="scale(1.2)"/>
                        <use href="#leaf-pair" y="200" transform="scale(1.1)"/>
                        <use href="#leaf-pair" y="150" transform="scale(1.0)"/>
                        <use href="#leaf-pair" y="100" transform="scale(0.9)"/>
                    </g>
                    <g style="animation: bloom 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) 2.2s forwards; opacity: 0;">
                        <g class="interactive-flower" onclick="this.classList.toggle('closed')">
                            <use href="#tulip-head" transform="scale(0.8)"/>
                        </g>
                    </g>
                </g>
            </g>

            <!-- Far Right Tulip (Background) -->
            <g transform="translate(350, 240) scale(0.7) rotate(15)" opacity="0.9">
                <g class="sway" style="transform-origin: 0 280px; animation-delay: -3.5s">
                    <g style="transform-origin: 0 280px; animation: growStem 3s ease-out forwards;">
                        <path d="M0,280 Q5,140 0,0" stroke="#0a5d2a" stroke-width="4" fill="none" />
                        <use href="#leaf-pair" y="230" transform="scale(1.2)"/>
                        <use href="#leaf-pair" y="180" transform="scale(1.1)"/>
                        <use href="#leaf-pair" y="130" transform="scale(1.0)"/>
                        <use href="#leaf-pair" y="80" transform="scale(0.9)"/>
                    </g>
                    <g style="animation: bloom 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) 2.4s forwards; opacity: 0;">
                        <g class="interactive-flower" onclick="this.classList.toggle('closed')">
                            <use href="#tulip-head" transform="scale(0.8)"/>
                        </g>
                    </g>
                </g>
            </g>

            <!-- Left Tulip -->
            <g transform="translate(100, 200) rotate(-10)">
                <g class="sway" style="transform-origin: 0 300px; animation-delay: 0s">
                    <g style="transform-origin: 0 300px; animation: growStem 3s ease-out forwards;">
                        <!-- Curved Stem -->
                        <path d="M0,300 Q-10,150 0,0" stroke="#0a5d2a" stroke-width="4" fill="none" />
                        <!-- Pinnate Leaves -->
                        <use href="#leaf-pair" y="260" transform="scale(1.3)"/>
                        <use href="#leaf-pair" y="210" transform="scale(1.2)"/>
                        <use href="#leaf-pair" y="160" transform="scale(1.1)"/>
                        <use href="#leaf-pair" y="110" transform="scale(1.0)"/>
                        <use href="#leaf-pair" y="60" transform="scale(0.9)"/>
                    </g>
                    <!-- Flower Wrapper for Bloom -->
                    <g style="animation: bloom 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) 2.5s forwards; opacity: 0;">
                        <g class="interactive-flower" onclick="this.classList.toggle('closed')">
                            <use href="#tulip-head" transform="scale(0.8)"/>
                        </g>
                    </g>
                </g>
            </g>

            <!-- Right Tulip -->
            <g transform="translate(300, 220) rotate(10)">
                <g class="sway" style="transform-origin: 0 280px; animation-delay: -2s">
                    <g style="transform-origin: 0 280px; animation: growStem 3s ease-out forwards;">
                        <!-- Curved Stem -->
                        <path d="M0,280 Q10,140 0,0" stroke="#0a5d2a" stroke-width="4" fill="none" />
                        <!-- Pinnate Leaves -->
                        <use href="#leaf-pair" y="240" transform="scale(1.3)"/>
                        <use href="#leaf-pair" y="190" transform="scale(1.2)"/>
                        <use href="#leaf-pair" y="140" transform="scale(1.1)"/>
                        <use href="#leaf-pair" y="90" transform="scale(1.0)"/>
                        <use href="#leaf-pair" y="40" transform="scale(0.9)"/>
                    </g>
                    <g style="animation: bloom 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) 2.7s forwards; opacity: 0;">
                        <g class="interactive-flower" onclick="this.classList.toggle('closed')">
                            <use href="#tulip-head" transform="scale(0.8)"/>
                        </g>
                    </g>
                </g>
            </g>

            <!-- Center Tulip (Main) -->
            <g transform="translate(200, 150)">
                <g class="sway" style="transform-origin: 0 350px; animation-delay: -4s">
                    <g style="transform-origin: 0 350px; animation: growStem 3s ease-out forwards;">
                        <!-- Curved Stem -->
                        <path d="M0,350 Q-5,175 0,0" stroke="#0a5d2a" stroke-width="6" fill="none" />
                        <!-- Pinnate Leaves (Dense) -->
                        <use href="#leaf-pair" y="320" transform="scale(1.5)"/>
                        <use href="#leaf-pair" y="270" transform="scale(1.4)"/>
                        <use href="#leaf-pair" y="220" transform="scale(1.3)"/>
                        <use href="#leaf-pair" y="170" transform="scale(1.2)"/>
                        <use href="#leaf-pair" y="120" transform="scale(1.1)"/>
                        <use href="#leaf-pair" y="70" transform="scale(1.0)"/>
                        <use href="#leaf-pair" y="30" transform="scale(0.9)"/>
                    </g>
                    <g style="animation: bloom 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) 2.8s forwards; opacity: 0;">
                        <g class="interactive-flower" onclick="this.classList.toggle('closed')">
                            <use href="#tulip-head" transform="scale(1.2)"/>
                        </g>
                    </g>
                </g>
            </g>
        </svg>
    </div>

    <script>
        // Generate Floating Circles
        const scene = document.getElementById('scene');
        const positions = [
            {t: 20, l: 10, s: 60}, {t: 50, l: 80, s: 50}, 
            {t: 70, l: 15, s: 40}, {t: 10, l: 70, s: 70},
            {t: 30, l: 85, s: 30}, {t: 15, l: 25, s: 45}
        ];

        function spawnBubble(pos, delay = 0) {
            const div = document.createElement('div');
            div.className = 'heart-circle';
            div.style.top = pos.t + '%';
            div.style.left = pos.l + '%';
            div.style.width = pos.s + 'px';
            div.style.height = pos.s + 'px';
            scene.appendChild(div);

            // Animate using Web Animations API
            const duration = 6000 + Math.random() * 4000;
            const anim = div.animate([
                { transform: 'translateY(100px) scale(0.8)', opacity: 0 },
                { opacity: 0.8, offset: 0.2 },
                { transform: 'translateY(-500px) scale(1.2)', opacity: 0 }
            ], {
                duration: duration,
                delay: delay,
                easing: 'ease-in'
            });

            anim.onfinish = () => {
                // Create burst at the final position
                const rect = div.getBoundingClientRect();
                const containerRect = scene.getBoundingClientRect();
                // Calculate center relative to container
                const x = rect.left - containerRect.left + rect.width / 2;
                const y = rect.top - containerRect.top + rect.height / 2;
                
                createBurst(x, y);
                div.remove();
                spawnBubble(pos); // Respawn
            };
        }

        positions.forEach(pos => {
            spawnBubble(pos, Math.random() * 5000);
        });

        function createBurst(x, y) {
            for (let i = 0; i < 8; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.left = x + 'px';
                p.style.top = y + 'px';
                scene.appendChild(p);
                
                const angle = Math.random() * Math.PI * 2;
                const dist = 30 + Math.random() * 40;
                const tx = Math.cos(angle) * dist;
                const ty = Math.sin(angle) * dist;
                
                p.animate([
                    { transform: 'translate(0,0) scale(1)', opacity: 1 },
                    { transform: `translate(${tx}px, ${ty}px) scale(0)`, opacity: 0 }
                ], {
                    duration: 800,
                    easing: 'ease-out'
                }).onfinish = () => p.remove();
            }
        }

        // Small Sparkles (Fireflies)
        for(let i=0; i<30; i++) {
            const sparkle = document.createElement('div');
            sparkle.style.position = 'absolute';
            sparkle.style.width = (Math.random() * 3 + 1) + 'px';
            sparkle.style.height = sparkle.style.width;
            sparkle.style.background = '#d4ff00';
            sparkle.style.borderRadius = '50%';
            sparkle.style.boxShadow = '0 0 5px #d4ff00';
            sparkle.style.top = Math.random() * 100 + '%';
            sparkle.style.left = Math.random() * 100 + '%';
            sparkle.style.opacity = Math.random();
            // Add a simple twinkle effect via transition or animation
            sparkle.style.transition = 'opacity 2s ease-in-out';
            
            scene.appendChild(sparkle);

            // Simple twinkle loop
            setInterval(() => {
                sparkle.style.opacity = Math.random();
            }, 1000 + Math.random() * 2000);
        }

        // Wind Effect: Scatter petals on double-click
        document.addEventListener('dblclick', (e) => {
            const flowers = document.querySelectorAll('.interactive-flower');
            flowers.forEach(flower => {
                // Only scatter if visible
                if (window.getComputedStyle(flower).opacity !== '0') {
                    scatterFlower(flower);
                }
            });
        });

        function scatterFlower(flower) {
            // Hide the flower head
            flower.style.transition = 'opacity 0.3s ease';
            flower.style.opacity = '0';
            flower.style.pointerEvents = 'none';

            const rect = flower.getBoundingClientRect();
            const sceneRect = scene.getBoundingClientRect();
            const startX = rect.left - sceneRect.left + rect.width / 2;
            const startY = rect.top - sceneRect.top + rect.height / 2;

            const colors = ['#8e24aa', '#ab47bc', '#ce93d8'];

            // Create particles
            for (let i = 0; i < 15; i++) {
                const petal = document.createElement('div');
                petal.style.position = 'absolute';
                petal.style.width = '12px';
                petal.style.height = '20px';
                petal.style.background = colors[Math.floor(Math.random() * colors.length)];
                petal.style.borderRadius = '50% 50% 50% 0';
                petal.style.left = startX + 'px';
                petal.style.top = startY + 'px';
                petal.style.zIndex = '100';
                
                const initialRotation = Math.random() * 360;
                petal.style.transform = `rotate(${initialRotation}deg)`;
                
                scene.appendChild(petal);

                // Animate scatter (Fall to ground)
                const endX = (Math.random() - 0.5) * 150; 
                const groundLevel = scene.clientHeight - 20; // Approximate ground
                const fallY = groundLevel - startY;
                
                petal.animate([
                    { transform: `translate(0,0) rotate(${initialRotation}deg)`, opacity: 1 },
                    { transform: `translate(${endX}px, ${fallY}px) rotate(${initialRotation + 720}deg)`, opacity: 1 }
                ], {
                    duration: 2000 + Math.random() * 1000,
                    easing: 'cubic-bezier(0.5, 0, 1, 1)', // Gravity
                    fill: 'forwards'
                });
            }

            // Regrow after a delay
            setTimeout(() => {
                flower.style.opacity = '1';
                flower.style.pointerEvents = 'auto';
            }, 4000);
        }

        // Generate Grass
        const svg = document.querySelector('svg');
        for (let i = 0; i < 150; i++) {
            const group = document.createElementNS("http://www.w3.org/2000/svg", "g");
            const blade = document.createElementNS("http://www.w3.org/2000/svg", "path");
            
            const x = Math.random() * 400;
            const h = 30 + Math.random() * 50;
            const curve = (Math.random() - 0.5) * 30;
            group.setAttribute("transform", `translate(${x}, 500)`);
            
            blade.classList.add("grass");
            blade.style.animationDelay = Math.random() * -5 + 's';
            blade.style.animationDuration = (3 + Math.random() * 3) + 's';

            blade.setAttribute("d", `M0,0 Q${curve * 0.5},${-h * 0.5} ${curve},${-h}`);
            blade.setAttribute("stroke", "url(#grassGrad)");
            blade.setAttribute("stroke-width", 1 + Math.random() * 2.5);
            blade.setAttribute("fill", "none");
            blade.setAttribute("stroke-linecap", "round");
            
            group.appendChild(blade);
            svg.appendChild(group);
        }
    </script>
</body>
</html>
